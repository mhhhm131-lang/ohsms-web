<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>OHSMS โ ุงูุนููุงุก ูุงูุดุฑูุงุก (ุงูุดุฑูุงุช ุงููุชุนุงูุฏุฉ)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="assets/css/styles.css">
</head>
<body>
<header class="top-header">
  <h1>ูุธุงู ุฅุฏุงุฑุฉ ุงูุณูุงูุฉ ูุงูุตุญุฉ ุงูููููุฉ โ OHSMS</h1>
  <p>ุฅุฏุงุฑุฉ ุงูุดุฑูุงุช ุงููุชุนุงูุฏุฉ ูุงูููุฑูุฏูู</p>
</header>

<div class="main-wrapper">
  <aside class="sidebar">
<h3>ุงููุงุฆูุฉ ุงูุฑุฆูุณูุฉ</h3>

<a class="nav-link" href="index.html" data-perm="view_home">ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ</a>
<a class="nav-link" href="reports.html" data-perm="view_reports">ูุธุงู ุงูุจูุงุบุงุช / ุณุฌู ุงููุชุงุจุนุฉ</a>
<a class="nav-link" href="risk.html" data-perm="view_risks">ุฅุฏุงุฑุฉ ุงููุฎุงุทุฑ</a>
<a class="nav-link" href="awareness.html" data-perm="view_awareness">ุงูุชูุนูุฉ ูุงูุชุซููู</a>
<a class="nav-link" href="vendors.html" data-perm="view_partners">ุงูุนููุงุก ูุงูุดุฑูุงุก</a>
<a class="nav-link" href="forms.html" data-perm="view_forms">ุงูููุงุฐุฌ ุงูุฑูููุฉ</a>
<a class="nav-link" href="dashboard.html" data-perm="view_dashboard">ููุญุฉ ุงูุชุญูู</a>
<a class="nav-link" href="admin.html" data-perm="view_system">ุฅุฏุงุฑุฉ ุงููุธุงู</a>

</aside>

  <main class="content">
    <section class="card">
      <h2><span class="emoji">๐ค</span> ุฅุฏุงุฑุฉ ุงูุดุฑูุงุช ุงููุชุนุงูุฏุฉ ูุงูููุฑูุฏูู</h2>
      <p class="hint">
        ูู ูุฐู ุงูุตูุญุฉ ูููู ุฅุฏุงุฑุฉ ุจูุงูุงุช ุงูุดุฑูุงุช ุงููุชุนุงูุฏุฉุ ูุชุงุจุนุฉ ูุซุงุฆู ุงูุณูุงูุฉ ูุงูุชุฑุงุฎูุตุ
        ููุฑุงูุจุฉ ุชูุงุฑูุฎ ุงูุงูุชูุงุก ูุชูููู ุฃุฏุงุก ุงูุดุฑูุงุช.
      </p>

      <div class="kpi-grid" id="vendorsKpi">
        <!-- KPIs injected by JS -->
      </div>
    </section>

    <section class="card">
      <h2><span class="emoji">๐</span> ุงูุจุญุซ ูุงูุชุตููุฉ</h2>
      <div class="vendor-filters">
        <div>
          <label>ุจุญุซ ุจุงุณู ุงูุดุฑูุฉ ุฃู ุงูุดุฎุต ุงููุณุคูู</label>
          <input id="vendorSearch" class="input" placeholder="ุงูุชุจ ุฌุฒุกูุง ูู ุงูุงุณู ุฃู ุงููุณุคูู...">
        </div>
        <div>
          <label>ููุน ุงูุดุฑูุฉ</label>
          <select id="vendorTypeFilter" class="input">
            <option value="">ูู ุงูุฃููุงุน</option>
            <option value="ููุงูู ุฑุฆูุณู">ููุงูู ุฑุฆูุณู</option>
            <option value="ููุงูู ูุฑุนู">ููุงูู ูุฑุนู</option>
            <option value="ููุฑุฏ">ููุฑุฏ</option>
            <option value="ุงุณุชุดุงุฑู">ุงุณุชุดุงุฑู</option>
          </select>
        </div>
        <div>
          <label>ุญุงูุฉ ุงููุซุงุฆู</label>
          <select id="vendorDocStatusFilter" class="input">
            <option value="">ูู ุงูุญุงูุงุช</option>
            <option value="valid">ูุซุงุฆู ุณุงุฑูุฉ</option>
            <option value="warning">ุชูุจูู (ุชูุชูู ูุฑูุจูุง)</option>
            <option value="expired">ูุซุงุฆู ููุชููุฉ</option>
          </select>
        </div>
        <div>
          <label>ุงูุญุฏ ุงูุฃุฏูู ููุชูููู</label>
          <select id="vendorRatingFilter" class="input">
            <option value="">ุจุฏูู ููุชุฑ</option>
            <option value="1">โญ ูุฃุนูู</option>
            <option value="2">โญ โญ ูุฃุนูู</option>
            <option value="3">โญ โญ โญ ูุฃุนูู</option>
            <option value="4">โญ โญ โญ โญ ูุฃุนูู</option>
            <option value="5">โญ โญ โญ โญ โญ ููุท</option>
          </select>
        </div>
        <div class="vendor-filters-actions">
          <button id="vendorAddBtn" class="btn btn-primary">โ ุฅุถุงูุฉ ุดุฑูุฉ ูุชุนุงูุฏุฉ</button>
        </div>
      </div>
    </section>

    <section class="card">
      <h2><span class="emoji">๐ข</span> ุงูุดุฑูุงุช ุงููุชุนุงูุฏุฉ ูุงูููุฑูุฏูู</h2>
      <div id="vendorsGrid" class="vendor-grid"></div>
      <p id="vendorsEmpty" class="empty" style="display:none;">ูุง ุชูุฌุฏ ุดุฑูุงุช ูุทุงุจูุฉ ููุนุงููุฑ ุงูุจุญุซ ุงูุญุงููุฉ.</p>
    </section>
  </main>
</div>

<!-- ูุงูุฐุฉ ุฅุถุงูุฉ/ุชุนุฏูู ุดุฑูุฉ -->
<div id="vendorModal" class="aw-modal aw-hidden">
  <div class="aw-modal-box">
    <button id="vendorModalClose" class="btn btn-secondary btn-small" style="float:left;">ุฅุบูุงู โ</button>
    <div style="clear:both;"></div>
    <h3 id="vendorModalTitle">ุฅุถุงูุฉ ุดุฑูุฉ ูุชุนุงูุฏุฉ</h3>
    <form id="vendorForm">
      <input type="hidden" id="vendorId">
      <div class="grid-3">
        <div>
          <label>ุงุณู ุงูุดุฑูุฉ</label>
          <input id="vendorName" class="input" required>
        </div>
        <div>
          <label>ููุน ุงูุดุฑูุฉ</label>
          <select id="vendorType" class="input" required>
            <option value="">ุงุฎุชุฑ ุงูููุน</option>
            <option value="ููุงูู ุฑุฆูุณู">ููุงูู ุฑุฆูุณู</option>
            <option value="ููุงูู ูุฑุนู">ููุงูู ูุฑุนู</option>
            <option value="ููุฑุฏ">ููุฑุฏ</option>
            <option value="ุงุณุชุดุงุฑู">ุงุณุชุดุงุฑู</option>
          </select>
        </div>
        <div>
          <label>ุฑูู ุงูุณุฌู ุงูุชุฌุงุฑู / ุงูุชุฑุฎูุต</label>
          <input id="vendorCR" class="input">
        </div>
      </div>

      <div class="grid-3">
        <div>
          <label>ุงุณู ุงูุดุฎุต ุงููุณุคูู</label>
          <input id="vendorContactName" class="input">
        </div>
        <div>
          <label>ุฌูุงู ุงูุดุฎุต ุงููุณุคูู</label>
          <input id="vendorContactMobile" class="input">
        </div>
        <div>
          <label>ุงููุฏููุฉ / ุงูููุทูุฉ</label>
          <input id="vendorCity" class="input">
        </div>
      </div>

      <div class="grid-3">
        <div>
          <label>ุฑูู ุงูุชูุงุตู ุงูุฑุฆูุณู</label>
          <input id="vendorPhone" class="input">
        </div>
        <div>
          <label>ุงูุจุฑูุฏ ุงูุฅููุชุฑููู</label>
          <input id="vendorEmail" class="input">
        </div>
        <div>
          <label>ุชูููู ุงูุดุฑูุฉ (1โ5)</label>
          <input id="vendorRating" type="number" min="1" max="5" class="input" value="3">
        </div>
      </div>

      <label>ููุงุญุธุงุช ุนุงูุฉ</label>
      <textarea id="vendorNotes" class="textarea"></textarea>

      <div style="margin-top:12px;display:flex;justify-content:flex-end;gap:8px;align-items:center;">
        <button type="button" id="vendorDeleteBtn" class="btn btn-outline btn-small" style="display:none;">๐ ุญุฐู ุงูุดุฑูุฉ</button>
        <button type="submit" class="btn btn-primary">๐พ ุญูุธ</button>
      </div>
    </form>
  </div>
</div>

<!-- ูุงูุฐุฉ ุฅุฏุงุฑุฉ ุงููุซุงุฆู -->
<div id="docsModal" class="aw-modal aw-hidden">
  <div class="aw-modal-box">
    <button id="docsModalClose" class="btn btn-secondary btn-small" style="float:left;">ุฅุบูุงู โ</button>
    <div style="clear:both;"></div>
    <h3 id="docsModalTitle">ูุซุงุฆู ุงูุดุฑูุฉ</h3>
    <p class="hint">ูููู ูู ููุง ุฅุถุงูุฉ ุฃู ุชุนุฏูู ุฃู ุญุฐู ุงููุซุงุฆู ุงููุฑุชุจุทุฉ ุจุงูุดุฑูุฉ (ูุซู ุดูุงุฏุงุช ุงูุณูุงูุฉุ ุงูุชุฃูููุ ุงูุชุฑุงุฎูุต...).</p>

    <div class="table-wrapper" style="margin-top:8px;">
      <table class="reports">
        <thead>
          <tr>
            <th>ููุน ุงููุซููุฉ</th>
            <th>ุฑูู ุงููุซููุฉ</th>
            <th>ุชุงุฑูุฎ ุงูุฅุตุฏุงุฑ</th>
            <th>ุชุงุฑูุฎ ุงูุงูุชูุงุก</th>
            <th>ุงูุญุงูุฉ</th>
            <th>ุฅุฌุฑุงุกุงุช</th>
          </tr>
        </thead>
        <tbody id="docsTableBody"></tbody>
      </table>
    </div>

    <p id="docsEmpty" class="empty">ูุง ุชูุฌุฏ ูุซุงุฆู ูุณุฌูุฉ ุญุชู ุงูุขู.</p>

    <h4 style="margin-top:12px;">โ ุฅุถุงูุฉ / ุชุนุฏูู ูุซููุฉ</h4>
    <form id="docForm" class="grid-4">
      <input type="hidden" id="docIndex">
      <div>
        <label>ููุน ุงููุซููุฉ</label>
        <input id="docType" class="input" placeholder="ูุซุงู: ุดูุงุฏุฉ ุณูุงูุฉ">
      </div>
      <div>
        <label>ุฑูู ุงููุซููุฉ</label>
        <input id="docNumber" class="input">
      </div>
      <div>
        <label>ุชุงุฑูุฎ ุงูุฅุตุฏุงุฑ</label>
        <input id="docIssue" type="date" class="input">
      </div>
      <div>
        <label>ุชุงุฑูุฎ ุงูุงูุชูุงุก</label>
        <input id="docExpiry" type="date" class="input">
      </div>
      <div style="grid-column:1/-1;display:flex;justify-content:flex-end;gap:8px;margin-top:8px;">
        <button type="button" id="docResetBtn" class="btn btn-secondary btn-small">ูุณุญ ุงูุญููู</button>
        <button type="submit" class="btn btn-primary btn-small">๐พ ุญูุธ ุงููุซููุฉ</button>
      </div>
    </form>
  </div>
</div>

<script src="assets/js/vendors.js"></script>

<script src="assets/js/system.js"></script>
<script>
document.addEventListener("DOMContentLoaded", function () {

    const user = ohsmsGetCurrentUser();
    if(!user){
        alert("ุงูุฑุฌุงุก ุชุณุฌูู ุงูุฏุฎูู ุฃููุงู");
        location.href="login.html";
        return;
    }

    if(!ohsmsHasPermission("view_partners")){
        alert("ุบูุฑ ูุตุฑุญ ูู ุจุงูุฏุฎูู ุฅูู ุงูุนููุงุก ูุงูุดุฑูุงุก");
        location.href = "index.html";
        return;
    }

});
</script>

</body>
</html>
